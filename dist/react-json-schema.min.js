"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n){if(Object.prototype.hasOwnProperty.call(n,o)){e[o]=n[o]}}}return e};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}return function(t,n,o){if(n)e(t.prototype,n);if(o)e(t,o);return t}}();var _react=require("react");function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var componentMapCollection=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(t){var n=null;var o=null;if(Object.prototype.toString.call(t)!=="[object Object]"){o=this.parseSubSchemas(t)}else{n=this.createComponent(t)}return n||o}},{key:"parseSubSchemas",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var o=[];var r=0;Object.keys(n).forEach(function(e){var a=n[e];if(Object.prototype.toString.call(a)==="[object String]"){o.push(a)}else{a.key=typeof a.key!=="undefined"?a.key:r;o.push(t.parseSchema(a));r++}});return o}},{key:"createComponent",value:function e(t){var n=_extends({},t);delete n.component;delete n.children;delete n.text;var o=this.resolveComponent(t);var r=typeof t.text!=="undefined"?t.text:this.resolveComponentChildren(t);return(0,_react.createElement)(o,n,r)}},{key:"resolveComponent",value:function e(t){var n=this.getComponentMap();var o=null;if(t.hasOwnProperty("component")){if(t.component===Object(t.component)){o=t.component}else if(n&&n[t.component]){o=n[t.component]}else if(_react.DOM.hasOwnProperty(t.component)){o=t.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component\n          attribute in the schema.")}return o}},{key:"resolveComponentChildren",value:function e(t){return t.hasOwnProperty("children")?this.parseSchema(t.children):[]}},{key:"getComponentMap",value:function e(){return componentMapCollection.get(this)}},{key:"setComponentMap",value:function e(t){componentMapCollection.set(this,t)}}]);return e}();exports.default=ReactJsonSchema;