"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(n,t,r){if(t)e(n.prototype,t);if(r)e(n,r);return n}}();var _react=require("react");function _objectWithoutProperties(e,n){var t={};for(var r in e){if(n.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;t[r]=e[r]}return t}function _classCallCheck(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}var _componentMap=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(n){var t=null;var r=null;if(Array.isArray(n)){r=this.parseSubSchemas(n)}else{t=this.createComponent(n)}return t||r}},{key:"parseSubSchemas",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=[];var r=0;var o=true;var a=false;var _=undefined;try{for(var c=n[Symbol.iterator](),i;!(o=(i=c.next()).done);o=true){var u=i.value;u.key=typeof u.key!=="undefined"?u.key:r;t.push(this.parseSchema(u));r++}}catch(e){a=true;_=e}finally{try{if(!o&&c.return){c.return()}}finally{if(a){throw _}}}return t}},{key:"createComponent",value:function e(n){var t=n.__component__,r=n.__children__,o=n.__text__,a=_objectWithoutProperties(n,["__component__","__children__","__text__"]);var _=this.resolveComponent(n);if(r===undefined&&o===undefined){return(0,_react.createElement)(_,a)}var c=typeof o!=="undefined"?o:this.resolveComponentChildren(n);return(0,_react.createElement)(_,a,c)}},{key:"resolveComponent",value:function e(n){var t=this.getComponentMap();var r=null;if(n.hasOwnProperty("__component__")){if(n.__component__===Object(n.__component__)){r=n.__component__}else if(t&&t[n.__component__]){r=t[n.__component__]}else if(_react.DOM.hasOwnProperty(n.__component__)){r=n.__component__}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component attribute in the schema.")}return r}},{key:"resolveComponentChildren",value:function e(n){return n.hasOwnProperty("__children__")?this.parseSchema(n.__children__):[]}},{key:"getComponentMap",value:function e(){return _componentMap.get(this)}},{key:"setComponentMap",value:function e(n){_componentMap.set(this,n)}}]);return e}();exports.default=ReactJsonSchema;